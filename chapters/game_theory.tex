\section{Game theoretic tools for the development of smartgrids}
As seen in the previous chapters technical challenges arise with the introduction of smart grids. Game theory, in combination with \gls{mas}, plays a significant role in the development of smart grids \cite{keypaper}. Game theory concepts provide us with a language to formulate, structure, analyse and understand strategic scenarios.

\subsection{What is game theory?}
We can define game theoretic games within the smart grid as finite n-unit normal form games with parameters: $\langle A,Action,C,g,\mu \rangle$ \cite{CourseInGameTheory}. \\
\begin{itemize}
    \item $A = \{1 ... n\}$ is a set of agents.
    \item $Action = \{A_{1} ... A_{i} ... A_{n}$\}, where $A_{i}$ is the set of actions a given agent $i$ can choose from.
    \item $C$ is the set of consequences.
    \item $g: Action \to C$ is the mapping of actions to consequences
    \item $\mu = \langle \mu_{1}, ..., \mu_{i}, ..., \mu_{n}, \rangle $ where $\mu_{i}$ is a payoff function for agent $i$.
\end{itemize}


\paragraph{Nash equilibrium} 
The most commonly used solution concept in game theory is that of Nash equilibrium \cite{CourseInGameTheory}. In this concept, each agent is assumed to know the equilibrium strategies of the other agents. The equilibrium is reached when each player isn't helped by changing it's own state, with the assumption that all other players don't change their state. 
This can be formalized as $\forall i: s^{*}_{i}$ is the best choice for agent $i$, maximuzing it's payoff, assuming al other agents choose solution $s^{*}_{x}$, for $x : \{1...n\}$. 

\paragraph{Computational challenge}
The hardest challenge is not finding a Nash equilibrium, but formulating an efficient algorithm. This notorious problem is described by Papdimitriou as 'the most fundamental computational problem whose complexity is wide open'\cite{daskalakis2009complexity}. Although in many strategic interactions (games) the answer is negative, in some games Nash Equilibrium can be compute directly or approximated with the use of an heuristic method\cite{MicrogridModellingPetrosAristidou,AumannGameTheoryAccomplish} 

\paragraph{Dominant strategy} 
A dominant strategy is in a way the opposite of an equilibrium, an agent can always make the same choice, with the highest payoff for itself, regardless of the choices that other agents make. 

\paragraph{Cooperative vs Noncooperative game theory} 
We divide game theory into two main branches: noncooperative game theory and cooperative game theory. Noncooperative game theory is used in the strategic decision-making processes of a number of entities that are independent in their decision making, and have a partially or totally conflicting interest over the outcome of a decision process that is affected by their actions\cite{keypaper}. In cooperative game theory, it is possible to model binding agreements between entities and strategies can be shared. 

It is important to note that noncooperative doesn't always imply that the players are not competing, any cooperation that arises must be self-enforcing with no communication or coordination of strategic choices among the players.\cite{keypaper}

\paragraph{Prisoner's Dilemma}
One of the most famous examples that illustrates a situation that can be modelled by game theory is the Prisoner's Dilemma. This is an example which was formalised by Poundstone \cite{poundstone} and goes as follows: 

Two suspects of a crime are arrested and imprisoned separately. If they both confess, each will be convicted to go to jail for 2 years. If only 1 suspect confesses, he wil be used as a witness against the other suspect. The witness wil be set free, the other suspect wil go to jail for 3 years. If they both remain silent, both of them will only serve 1 year in prison.\\
This game can be formalised using $\langle A,Action,C,g,\mu \rangle$ as:

\begin{itemize}
    \item $A = \{S_{1}, S_{2} \}$ the suspects are the players.
    \item $Action_{1} = Action_{2} = \{S, C\}$ Silent or Confess.
    \item $C = \{c_{1},c_{2},c_{3},c_{4}\}$, both serve 1 year, both serve 2 years, or one goes free and the other serves 3 years.
    \item $g((S,S)) = c_{1}$, \\
    $g((C,C)) = c_{2}$, \\
    $g((S,C)) = c_{3}$, \\
    $g((C,S)) = c_{4}$.
    \item $\mu S_{1}(c_{1}) = \mu S_{2}(c_{1}) = 1$, \\
    $\mu S_{1}(c_{2}) = \mu S_{2}(c_{2}) = 2$, \\
    $\mu S_{1}(c_{3}) = \mu S_{2}(c_{4}) = 0$, \\
    $\mu S_{1}(c_{4}) = \mu S_{2}(c_{3}) = 3$.
\end{itemize}

\begin{table}[h]
\centering
\begin{tabular}{ccc}
                             & silent                   & confes                   \\ \cline{2-3} 
\multicolumn{1}{c|}{silent}  & \multicolumn{1}{c|}{1,1} & \multicolumn{1}{c|}{0,3} \\ \cline{2-3} 
\multicolumn{1}{c|}{confess} & \multicolumn{1}{c|}{3,0} & \multicolumn{1}{c|}{2,2} \\ \cline{2-3} 
\end{tabular}
\caption{Prisoners dilemma options}
\label{prisoners-d}
\end{table}

In Table \ref{prisoners-d} you see all options for the prisoner's dilemma modelled in an easier to read table format. If the prisoners want the total number of years in prison to be as low as possible, they should both be silent. Interesting however is that each player has an incentive to confess. With the given prisoners dilemma example we have to following situation: No matter what is chosen by one player, the other player benefits to confess. This is why the Nash equilibrium for this game is (Confess, Confess). This is a good example of a dominant strategy. 

\subsection{Examples of commonly used game theoretical concepts}
In this subsection we will discuss some game theory concepts used in the following chapters. \improve{Extend explanation why we chose these problems}

\paragraph{Auctions}
Auctions are often used in games to decide for what price power should be bought or sold. First-price auctions are auctions where bidders submit bids, and the highest bidder wins and pays the winning bid. Second-price auctions are auctions where also the highest bidder wins, but where the bidder pays a price equal to the second highest bid. Second-price bids are for example used in \cite{SaadHanPoorEtAl2011} because this type of auction is strategy proof, i.e., it gives the involved entities an incentive to truthfully reveal their bids.
\paragraph{Stochastic games}
Almost all games are based on stochastic models. A stochastic game is a dynamic play that proceeds from position to position \cite{Shapley1953} and can be played by one or more players. Quite a few papers have been written with stochastic games in the smart grid \cite{LiangZhuang2014} because they are good to characterize the randomness in renewable power generation.  
\paragraph{Bayesian games}
Bayesian games are a noncooperative game in game theory where the information about the strategies and objective function of the other players is incomplete. These games are hard to model and not a lot of research has yet been done on possible usage in smart grids. Given the large nature of the smart grid, the amount of players involved, it is quite possible that players in any game model might face technical difficulties in estimating the strategies or objectives of the other players \cite{keypaper}. With this in mind, bayesian games can overcome a lot of these difficulties. 

\paragraph{Game of perfect information}
Games of perfect information or extensive games of perfect information deal with the type of games that have a sequential structure and assuming that every player having knowledge about the previous actions of other players \cite{CourseInGameTheory}.

\paragraph{Stackelberg games}
A Stackelberg game is a game of perfect information. \cite{CourseInGameTheory}.
In a Stackelberg game there is a player who takes on the role of the \textit{leader} and another player who is the \textit{follower}. The leader will then try to enforce its strategy onto the follower \cite{ShohamLeyton-Brown2008}. The follower is informed of the action chosen by the leader and will then proceed to choose its own action.

%\paragraph{Potluck problems}

\paragraph{Mechanism design}
The standard game theory procedure is to formulate a model that
captures a situation and to investigate the set of outcomes that are
consistent with some solution concept \cite{CourseInGameTheory}. In game theory however, this isn't always sufficient because the number of players is high and the supply and demand is constantly changing. This is where mechanism design comes in. In mechanism design, or reversed game theory, we do exactly the opposite as in the standard game theory procedure. We first define the goal we want to achieve, and then analyse what procedures can be designed to achieve those goals \cite{SalfatiRabinovici2014}. 

\todo{Write paragraph about VCG + AVG}

\subsection{Game Theory applied to Smart Grids}
When researching game theoretic approaches to manage and run smart grids, one will find out that a distinction can be made for different kind of subproblems arising in smart grids research \cite{keypaper}. In this paper the focus is on the use of microgrids and the demand side management. First the microgrids are summarised. Secondly the \gls{dsm} is summarised. \gls{dsm} will help in locating and solving issues involving the end user. 

\todo{Discuss that we're going to look at DSM and microgrids, and why we've chosen these topics over other topics}

\subsubsection{Expected shortcomings}
\todo{Extend this subsection}

Issues expected when using Game Theory using the following terms:
\begin{itemize}
	\item Scalability (is the game applicable on a large scale or only in a small local market?)
	\item Interoperability (how does the game do in multiple contexts, f.e. in context of DER?)
	\item Realism (is the representation of the game realistic in a real world application?)
\end{itemize}
