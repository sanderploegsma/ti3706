\section{Energy management}\label{Energy-Management}
\todo{Talk about energy management in general, About storage, transportation and generation problems}
There has been done a lot of research into the energy management in smart grids, utilizing Game Theory\ref{WangOuyangKrishnanEtAl2015, TusharZhangSmithEtAl2013} \todo{need more ref}. Most of these papers don't seem to take into account the size of a smart-grid, or try to model all aspects of energy management using 'one Game Theoretic approach.
We choose for a different approach and see energy management having three main aspects, Energy Generation, Energy Storage and Energy transport. For energy generation, we focus on \ac{VPP}s \todo{elaborate}. For Energy storage and transport we focus on microgrids, as microgrids solve the problem of energy loss and interesting energy storage solutions are proposed with the use of microgrids.

\subsection{VPP's}
Key subject: VPP's, Game Theoretic approaches to control and manage the generation of energy
While individual \acp{der} have the option to sell (portions of) their produced energy to the grid, the number of \acp{der} in the network and their accompanying unreliability makes it hard to account for them in production schedules \cite{RobuKotaChalkiadakisEtAl2012}. It is essential that the grid's independent suppliers are reliable, since the failure to meet production targets could seriously compromise the smooth operation of the network as a whole \cite{ChalkiadakisRobuKotaEtAl2011}. The main concept of a \ac{vpp} illustrates a centralised control structure which connects, controls and visualises a work of these distributed generators \cite{NikonowiczMilewski2012}. Note that these generators can be both fossil and renewable energy sources \cite{LombardiPowalkoRudion2009}. The \ac{vpp} keeps track of its sources' supplies and is able to determine the price. 

\acp{vpp} can be very efficient, as they allow the combination of different energy sources to generate a continuous supply. In other words, resources with different weaknesses and strengths are combined in a complementary way \cite{Koeppel2003}. For example, when a wind turbine and solar cells are combined, the \ac{vpp} is less subject to changing weather conditions \cite{Tromly2001, Kumagai2012, MashhourMoghaddas-Tafreshi2011, NikonowiczMilewski2012}. 

A \ac{vpp} may use one of these approaches \cite{NikonowiczMilewski2012}:
\begin{itemize}
	\item Centralised control, where a single \ac{vpp} is responsible for the logic and management of \acp{der}, pricing and supply.
	\item Distributed control, where one or more local \acp{vpp} control a limited number of \acp{der} while delegating certain decisions upwards to a higher level \ac{vpp}.
	\item Fully distributed control, where each \ac{der} acts as an independent and intelligent agent.
\end{itemize}

Within the smart grid, the first approach is probably too simple, the resulting \ac{vpp} will become huge. Instead, it would be more feasible to use different \acp{vpp} with different targets, such as minimisation of generation costs and maximisation of profits \cite{LombardiPowalkoRudion2009}. The smart grid will then draw its energy from an aggregate of these \acp{vpp}, to deliver to its consumers. 

To coordinate production and pricing in a fully distributed \ac{vpp}, some form of agent cooperation is needed. To achieve this, mechanism design and cooperative game theory can be combined to derive a pricing mechanism, as well as ways to allocate revenues across agents and manage \ac{vpp} membership \cite{ChalkiadakisRobuKotaEtAl2011}. 

\subsection{\ac{der} production estimates}
\label{vpp:productionestimates}
To make sure a \ac{vpp} is reliable, it should be able to predict a certain level of energy supply to a microgrid or smart grid. The main issue with this structure is that every \ac{vpp} needs to announce how much energy it is able to produce. Due to the fluctuating nature of renewable energy sources, the prediction of the energy production is not an easy procedure \cite{LombardiPowalkoRudion2009}.  

To get a better view of the energy production estimates within a group of individual \ac{der} agents, a pricing system may be introduced that encourages these agents to provide the \ac{vpp} with accurate estimates \cite{ChalkiadakisRobuKotaEtAl2011}. The proposed system not only encourages large \ac{vpp} sizes, but also promotes truthfulness by basing the payment on the accuracy of the supply prediction. This ensures that both \acp{vpp} and \acp{der} have no incentive to provide a wrong or biased estimate.

Furthermore, \cite{RobuKotaChalkiadakisEtAl2012} notes that a confidence interval is preferred over single point estimates, to remove the uncertainty of those estimates. It also proposes scoring rules, guaranteeing maximum reward if and only if a \ac{der} agent accurately reports its expectation over the prediction error it may make.  

\subsection{Coalitional games}
\label{vpp:coalition}
\ac{vpp} membership poses another risk in a stable energy production. Should one or more individual \ac{der} agents managed by a \ac{vpp} decide to leave, the decrease in that \ac{vpp}'s production power may be significant. 

To ensure that the production of a \ac{vpp} remains relatively stable, a payoff scheme may be used that is based on a coalitional stability concept called \emph{the core} \cite{Myerson1991}. In short, a coalitional game with a subset of \acp{der} (the coalition) can be formed \cite{MihailescuVasiraniOssowski2011}. In this game, allocations of the maximum payoff can be determined to make sure agents do not break that coalition to improve their payoff even further\cite{ChalkiadakisRobuKotaEtAl2011, YeungPoonWu1999, SaadHanPoor2011}. Such an allocation belongs to the core of that game, and will ensure that a given set of \ac{der} agents will keep working together.



\subsection{Microgrids}
\todo{Short introduction for microgrids with energy management}
A microgrid is a group of interconnected loads and distributed energy resources within clearly defined electrical boundaries that acts as a single controllable entity with respect to the grid. A microgrid can connect and disconnect from the grid to enable it to operate in both grid-connected or island-mode.
Due to the fact that microgrids are in essence smart-grids with geographical limitiations(Hoewel er ook virtuele microgrids bestaan), it is logical to see that when a microgrid is modelled using Game Theory, less players exists in a game. As discussed in chapter two, calculating nash equilibria is almost as hard as calculating NP-hard problems. When making algorithms approximating the nash equilibria, heuristics are definitely needed. Therefore, computing an approximation for nash equilibrium will cost relatively less computing power when done for microgrids. In this way, we can use a Dynamic Game with perfect information to solve local \ac{neq} in a microgrid
Dynamic games are games with sequential move order, meaning, some players move or act only after having observed someone elseâ€™s move or action. Perfect Information denotes that at every round of the game, the player whose turn is to chose an action knows the actions other players have chosen before him. The game formed by the Microgrid model can be of complete information, meaning that every players revenue function is common knowledge.
To do this, all players are equipped with smart agents, and each smart agent determines its strategy and it is assumed that all players seek to maximize their revenue. By using a backwards-induction-outcome, a nash equilibrium can be calculated.\ref{MicrogridModellingPetrosAristidou}

todo: 
but also creates the opportunity to utilize game theoretic methods to compute local nash equilibria, such as a Dynamic Game of Perfect information and a Double Auction Game.


Talk about the pro's from microgrids:
 - Smaller, thus less complex. So Game with perfect information
 - Communication between microgrids, smart Game theoretic methods for SMGN(Smart Micro Grid Networking) Also mention less energy loss and infrastructure
 - Energy Storage: Example parking place microgrid






